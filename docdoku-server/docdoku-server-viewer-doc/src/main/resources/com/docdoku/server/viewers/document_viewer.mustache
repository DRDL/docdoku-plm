<script type="text/javascript">
    //
    // Fetch the PDF document from the URL using promices
    //
    PDFJS.workerSrc = '/pdfjs/pdf.js';

    PDFJS.getDocument('{{uriResource}}?type=viewer&fpv=pdf').then(function(pdf) {

        // Using promise to fetch the page
        pdf.getPage(1).then(function(page) {
            var scale = 1.5;
            var viewport = page.getViewport(scale);

            //
            // Prepare canvas using PDF page dimensions
            //
            var canvas = document.getElementById('pdfjs-{{thisId}}');
            var context = canvas.getContext('2d');
            canvas.height = viewport.height;
            canvas.width = viewport.width;

            //
            // Render PDF page into canvas context
            //
            var renderContext = {
                canvasContext: context,
                viewport: viewport
            };
            page.render(renderContext);
        });
    });

</script>
<div class="accordion-heading">
    <a class="download" href="{{uriResource}}"><i class="icon-cloud-download"></i></a>
    <a class="open_in_pdfjs" href="/pdfjs/viewer.html?file=..{{uriResource}}%3Ftype%3Dviewer%26fpv%3Dpdf" target="_blank"><i class="icon-fullscreen"></i></a>
    <a class="accordion-toggle" data-toggle="collapse" href="#{{thisId}}">{{fileName}}</a>
</div>
<div id="{{thisId}}" class="accordion-body collapse">
    <div class="accordion-inner">
        <canvas id="pdfjs-{{thisId}}" style="border:1px solid black;"/>
    </div>
</div>